<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" href="/images/favicon.svg">
  
  <link rel="stylesheet" href="/scss/global.min.cc2decf9a377d0295f586f0965eb58a37bfacb6fc8780a8e356d6d97e005f264.css">
  
  <link rel="stylesheet" href="/css/prism.css" />
  <link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel="stylesheet">
  

 






	




<title>BaÅŸarÄ±lÄ± bir capistrano alternatifi: mina | muratbastas</title>
<meta name="description" content="Merhaba, Ã§ok uzun zaman Ã¶nce planladÄ±ÄŸÄ±m ama bir fÄ±rsat bulup da yazmaya baÅŸlayamadÄ±ÄŸÄ±m ilk yazÄ±mÄ± yazmanÄ±n vakti geldi de geÃ§iyor.
Bu yazÄ±mda Ruby on Rails ile yazdÄ±ÄŸÄ±m projemi capistrano ile deploy etmeye Ã§alÄ±ÅŸÄ±rken daha basit configure edebildiÄŸim mina ile nasÄ±l deploy ettiÄŸimi anlatacaÄŸÄ±m.
HazÄ±rlÄ±k Ã–ncelikle mina sistemimizde kurulu olmalÄ±. gem install mina komutu ile mina gem&rsquo;ini kuruyoruz. Her hangi bir izin(permission) hatasÄ± alÄ±rsanÄ±z gem&rsquo;i sudo ile kurabilirsiniz. Benim deploy edeceÄŸim projenin adÄ± projem olsun.">
<meta property="og:title" content="BaÅŸarÄ±lÄ± bir capistrano alternatifi: mina | muratbastas">
<meta property="og:site_name" content="muratbastas">
<meta property="og:description" content="Merhaba, Ã§ok uzun zaman Ã¶nce planladÄ±ÄŸÄ±m ama bir fÄ±rsat bulup da yazmaya baÅŸlayamadÄ±ÄŸÄ±m ilk yazÄ±mÄ± yazmanÄ±n vakti geldi de geÃ§iyor.
Bu yazÄ±mda Ruby on Rails ile yazdÄ±ÄŸÄ±m projemi capistrano ile deploy etmeye Ã§alÄ±ÅŸÄ±rken daha basit configure edebildiÄŸim mina ile nasÄ±l deploy ettiÄŸimi anlatacaÄŸÄ±m.
HazÄ±rlÄ±k Ã–ncelikle mina sistemimizde kurulu olmalÄ±. gem install mina komutu ile mina gem&rsquo;ini kuruyoruz. Her hangi bir izin(permission) hatasÄ± alÄ±rsanÄ±z gem&rsquo;i sudo ile kurabilirsiniz. Benim deploy edeceÄŸim projenin adÄ± projem olsun.">
<meta property="og:url" content="http://localhost:1313/2016/10/16/ba%C5%9Far%C4%B1l%C4%B1-bir-capistrano-alternatifi-mina/">
<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:image" content='http://localhost:1313/uploads/default.jpg'><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="BaÅŸarÄ±lÄ± bir capistrano alternatifi: mina | muratbastas">

	<link rel="canonical" href="http://localhost:1313/2016/10/16/ba%C5%9Far%C4%B1l%C4%B1-bir-capistrano-alternatifi-mina/">


	<meta name="twitter:site" content="@https://twitter.com/muratbastas">
	<meta name="twitter:creator" content="@https://twitter.com/muratbastas">

	<meta name="twitter:description" content="Merhaba, Ã§ok uzun zaman Ã¶nce planladÄ±ÄŸÄ±m ama bir fÄ±rsat bulup da yazmaya baÅŸlayamadÄ±ÄŸÄ±m ilk yazÄ±mÄ± yazmanÄ±n vakti geldi de geÃ§iyor.
Bu yazÄ±mda Ruby on Rails ile yazdÄ±ÄŸÄ±m projemi capistrano ile deploy etmeye Ã§alÄ±ÅŸÄ±rken daha basit configure edebildiÄŸim mina ile nasÄ±l deploy ettiÄŸimi anlatacaÄŸÄ±m.
HazÄ±rlÄ±k Ã–ncelikle mina sistemimizde kurulu olmalÄ±. gem install mina komutu ile mina gem&rsquo;ini kuruyoruz. Her hangi bir izin(permission) hatasÄ± alÄ±rsanÄ±z gem&rsquo;i sudo ile kurabilirsiniz. Benim deploy edeceÄŸim projenin adÄ± projem olsun.">
<meta name="twitter:image" content="http://localhost:1313/uploads/default.jpg">
<meta property="article:published_time" content="2016-10-16T19:20:00&#43;03:00">
	<meta property="article:updated_time" content="2016-10-16T19:20:00&#43;03:00">



  <script>localStorage.setItem("isLight", 'true')</script>

  <style>
    p, .code-toolbar, ul, .article-header {
      max-width: 96%;
    }
    .nav-container {
      display: flex;
      justify-content: center;
    }
    .section {
      padding: 2rem;
    }
    .subheading-container { 
      margin-bottom: 1rem;
    }
    .article-hero-heading {
      max-width: 96%;
      text-align: center;
    }
    .articles-list-container-alt .post-row .article-link .article-data-outer .article-data { max-width: 100% !important; width: 100% !important; }
    .post-row > a { margin: 1rem 0 !important; }
    .article-data .article-title { margin: 1rem 0 !important }
    .article-header, .article-title {
      padding-left: initial;
    }
    .article-hero-subtitle {
      display: flex;
      justify-content: center;
    }
    h1, h2, h3, h4, h5, h6 { max-width: 96%; }
    @media screen and (max-width: 540px) {
      .article-header { margin: 10px 0; padding: 0; }
      .article-header h1 { padding: 0; }
      .article-link { box-shadow: none; }
      .article-title { padding: 0; margin: 10px 0; }
      .article-excerpt { display: none; }
      .article-metadata { padding: 0; }
      h1, h2, h3, h4, h5, h6 { padding: 0 1rem; }
    }
    p>code {
      color: #f8f8f2;
      background-color: #919191;
      padding: 0 4px;
      border-radius: 3px;
    }

    #articleContent {
      padding: 0 0 35px;
    }

    #articleContent>figure>img {
      max-width: 100% !important;
    }
  </style>
</head>


<body class="line-numbers">

    
    <script src="/js/initColors.js"></script>

    <div class="layout-styled">

        <Section class="section">
  <div class="nav-container">
    <a class="logo-link" href="/">
      ğŸ±â€ğŸ‘¤ <span style="font-weight: bold">&nbsp;&nbsp;denemeler (by murat bastas)</span>
      <span class="header-hidden">Navigate back to the homepage</span>
    </a>
    <div class="nav-controls">
      
      
      
    </div>
</div>
</Section>


<script src="/js/toggleLogos.js"></script>


<script src="/js/toggleColors.js"></script>


<script src="/js/copyUrl.js"></script>

        

<section class="section narrow">

  <section id="articleHero" class="section narrow">
  <div class="article-hero">
    <header class="article-header">
      <h1 class="article-hero-heading">BaÅŸarÄ±lÄ± bir capistrano alternatifi: mina</h1>
      <div class="article-hero-subtitle">
        <div class="article-meta">
          
          October 16, 2016
          
        </div>
      </div>
    </header>
    
  </div>
</section>


  


  <article id="articleContent" class="post-content">
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#hazÄ±rlÄ±k">HazÄ±rlÄ±k</a></li>
    <li><a href="#sunucuyu-hazÄ±rlamak">Sunucuyu hazÄ±rlamak</a></li>
    <li><a href="#gÃ¶revler">GÃ¶revler</a></li>
    <li><a href="#komut-Ã§alÄ±ÅŸtÄ±rmakhttpnadareicominatasksrunhtml">Komut Ã§alÄ±ÅŸtÄ±rmak</a></li>
  </ul>
</nav>
    

    <p>Merhaba, Ã§ok uzun zaman Ã¶nce planladÄ±ÄŸÄ±m ama bir fÄ±rsat bulup da yazmaya baÅŸlayamadÄ±ÄŸÄ±m ilk yazÄ±mÄ± yazmanÄ±n vakti geldi de geÃ§iyor.</p>
<p>Bu yazÄ±mda Ruby on Rails ile yazdÄ±ÄŸÄ±m projemi capistrano ile deploy etmeye Ã§alÄ±ÅŸÄ±rken daha basit configure edebildiÄŸim mina ile nasÄ±l deploy ettiÄŸimi anlatacaÄŸÄ±m.</p>
<h2 id="hazÄ±rlÄ±k">HazÄ±rlÄ±k</h2>
<p>Ã–ncelikle <strong>mina</strong> sistemimizde kurulu olmalÄ±. <code>gem install mina</code> komutu ile mina gem&rsquo;ini kuruyoruz. Her hangi bir izin(permission) hatasÄ± alÄ±rsanÄ±z gem&rsquo;i <strong>sudo</strong> ile kurabilirsiniz. Benim deploy edeceÄŸim projenin adÄ± <strong>projem</strong> olsun. EÄŸer sizin mevcut bir projeniz yoksa;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">rails new projem --skip-bundle <span style="color:#f92672">&amp;&amp;</span> cd projem
echo <span style="color:#e6db74">&#34;gem &#39;therubyracer&#39;, platforms: :ruby&#34;</span> &gt;&gt; Gemfile
bundle install
</code></pre></div><p>Projemiz hazÄ±r iken aÅŸaÄŸÄ±daki gibi mina iÃ§in config/deploy.rb dosyamÄ±zÄ± oluÅŸturuyoruz.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh"><span style="color:#75715e"># /local/makine/projeler/projem</span>
mina init
</code></pre></div><p>deploy.rb dosyasÄ±nÄ±n iÃ§eriÄŸi varsayÄ±lan olarak alttaki ÅŸekilde oluyor.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">require <span style="color:#e6db74">&#39;mina/bundler&#39;</span>
require <span style="color:#e6db74">&#39;mina/rails&#39;</span>
require <span style="color:#e6db74">&#39;mina/git&#39;</span>
<span style="color:#75715e"># require &#39;mina/rbenv&#39;  # for rbenv support. (http://rbenv.org)</span>
<span style="color:#75715e"># require &#39;mina/rvm&#39;    # for rvm support. (http://rvm.io)</span>

<span style="color:#75715e"># Basic settings:</span>
<span style="color:#75715e">#   domain       - The hostname to SSH to.</span>
<span style="color:#75715e">#   deploy_to    - Path to deploy into.</span>
<span style="color:#75715e">#   repository   - Git repo to clone from. (needed by mina/git)</span>
<span style="color:#75715e">#   branch       - Branch name to deploy. (needed by mina/git)</span>

set :domain, <span style="color:#e6db74">&#39;foobar.com&#39;</span>
set :deploy_to, <span style="color:#e6db74">&#39;/var/www/foobar.com&#39;</span>
set :repository, <span style="color:#e6db74">&#39;git://...&#39;</span>
set :branch, <span style="color:#e6db74">&#39;master&#39;</span>

<span style="color:#75715e"># For system-wide RVM install.</span>
<span style="color:#75715e">#   set :rvm_path, &#39;/usr/local/rvm/bin/rvm&#39;</span>

<span style="color:#75715e"># Manually create these paths in shared/ (eg: shared/config/database.yml) in your server.</span>
<span style="color:#75715e"># They will be linked in the &#39;deploy:link_shared_paths&#39; step.</span>
set :shared_paths, <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;config/database.yml&#39;</span>, <span style="color:#e6db74">&#39;config/secrets.yml&#39;</span>, <span style="color:#e6db74">&#39;log&#39;</span><span style="color:#f92672">]</span>

<span style="color:#75715e"># Optional settings:</span>
<span style="color:#75715e">#   set :user, &#39;foobar&#39;    # Username in the server to SSH to.</span>
<span style="color:#75715e">#   set :port, &#39;30000&#39;     # SSH port number.</span>
<span style="color:#75715e">#   set :forward_agent, true     # SSH forward_agent.</span>

<span style="color:#75715e"># This task is the environment that is loaded for most commands, such as</span>
<span style="color:#75715e"># `mina deploy` or `mina rake`.</span>
task :environment <span style="color:#66d9ef">do</span>
  <span style="color:#75715e"># If you&#39;re using rbenv, use this to load the rbenv environment.</span>
  <span style="color:#75715e"># Be sure to commit your .ruby-version or .rbenv-version to your repository.</span>
  <span style="color:#75715e"># invoke :&#39;rbenv:load&#39;</span>

  <span style="color:#75715e"># For those using RVM, use this to load an RVM version@gemset.</span>
  <span style="color:#75715e"># invoke :&#39;rvm:use[ruby-1.9.3-p125@default]&#39;</span>
end

<span style="color:#75715e"># Put any custom mkdir&#39;s in here for when `mina setup` is ran.</span>
<span style="color:#75715e"># For Rails apps, we&#39;ll make some of the shared paths that are shared between</span>
<span style="color:#75715e"># all releases.</span>
task :setup <span style="color:#f92672">=</span>&gt; :environment <span style="color:#66d9ef">do</span>
  queue! %<span style="color:#f92672">[</span>mkdir -p <span style="color:#e6db74">&#34;#{deploy_to}/#{shared_path}/log&#34;</span><span style="color:#f92672">]</span>
  queue! %<span style="color:#f92672">[</span>chmod g+rx,u+rwx <span style="color:#e6db74">&#34;#{deploy_to}/#{shared_path}/log&#34;</span><span style="color:#f92672">]</span>

  queue! %<span style="color:#f92672">[</span>mkdir -p <span style="color:#e6db74">&#34;#{deploy_to}/#{shared_path}/config&#34;</span><span style="color:#f92672">]</span>
  queue! %<span style="color:#f92672">[</span>chmod g+rx,u+rwx <span style="color:#e6db74">&#34;#{deploy_to}/#{shared_path}/config&#34;</span><span style="color:#f92672">]</span>

  queue! %<span style="color:#f92672">[</span>touch <span style="color:#e6db74">&#34;#{deploy_to}/#{shared_path}/config/database.yml&#34;</span><span style="color:#f92672">]</span>
  queue! %<span style="color:#f92672">[</span>touch <span style="color:#e6db74">&#34;#{deploy_to}/#{shared_path}/config/secrets.yml&#34;</span><span style="color:#f92672">]</span>
  queue  %<span style="color:#f92672">[</span>echo <span style="color:#e6db74">&#34;-----&gt; Be sure to edit &#39;#{deploy_to}/#{shared_path}/config/database.yml&#39; and &#39;secrets.yml&#39;.&#34;</span><span style="color:#f92672">]</span>

  <span style="color:#66d9ef">if</span> repository
    repo_host <span style="color:#f92672">=</span> repository.split<span style="color:#f92672">(</span>%r<span style="color:#f92672">{</span>@|://<span style="color:#f92672">}</span><span style="color:#f92672">)</span>.last.split<span style="color:#f92672">(</span>%r<span style="color:#f92672">{</span>:|<span style="color:#ae81ff">\/</span><span style="color:#f92672">}</span><span style="color:#f92672">)</span>.first
    repo_port <span style="color:#f92672">=</span> /:<span style="color:#f92672">(</span><span style="color:#f92672">[</span>0-9<span style="color:#f92672">]</span>+<span style="color:#f92672">)</span>/.match<span style="color:#f92672">(</span>repository<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> /:<span style="color:#f92672">(</span><span style="color:#f92672">[</span>0-9<span style="color:#f92672">]</span>+<span style="color:#f92672">)</span>/.match<span style="color:#f92672">(</span>repository<span style="color:#f92672">)</span><span style="color:#f92672">[</span>1<span style="color:#f92672">]</span> <span style="color:#f92672">||</span> <span style="color:#e6db74">&#39;22&#39;</span>

    queue %<span style="color:#f92672">[</span>
      <span style="color:#66d9ef">if</span> ! ssh-keygen -H  -F <span style="color:#75715e">#{repo_host} &amp;&gt;/dev/null; then</span>
        ssh-keyscan -t rsa -p <span style="color:#75715e">#{repo_port} -H #{repo_host} &gt;&gt; ~/.ssh/known_hosts</span>
      <span style="color:#66d9ef">fi</span>
    <span style="color:#f92672">]</span>
  end
end

desc <span style="color:#e6db74">&#34;Deploys the current version to the server.&#34;</span>
task :deploy <span style="color:#f92672">=</span>&gt; :environment <span style="color:#66d9ef">do</span>
  to :before_hook <span style="color:#66d9ef">do</span>
    <span style="color:#75715e"># Put things to run locally before ssh</span>
  end
  deploy <span style="color:#66d9ef">do</span>
    <span style="color:#75715e"># Put things that will set up an empty directory into a fully set-up</span>
    <span style="color:#75715e"># instance of your project.</span>
    invoke :<span style="color:#e6db74">&#39;git:clone&#39;</span>
    invoke :<span style="color:#e6db74">&#39;deploy:link_shared_paths&#39;</span>
    invoke :<span style="color:#e6db74">&#39;bundle:install&#39;</span>
    invoke :<span style="color:#e6db74">&#39;rails:db_migrate&#39;</span>
    invoke :<span style="color:#e6db74">&#39;rails:assets_precompile&#39;</span>
    invoke :<span style="color:#e6db74">&#39;deploy:cleanup&#39;</span>

    to :launch <span style="color:#66d9ef">do</span>
      queue <span style="color:#e6db74">&#34;mkdir -p #{deploy_to}/#{current_path}/tmp/&#34;</span>
      queue <span style="color:#e6db74">&#34;touch #{deploy_to}/#{current_path}/tmp/restart.txt&#34;</span>
    end
  end
end

<span style="color:#75715e"># For help in making your deploy script, see the Mina documentation:</span>
#
<span style="color:#75715e">#  - http://nadarei.co/mina</span>
<span style="color:#75715e">#  - http://nadarei.co/mina/tasks</span>
<span style="color:#75715e">#  - http://nadarei.co/mina/settings</span>
<span style="color:#75715e">#  - http://nadarei.co/mina/helpers</span>
</code></pre></div><p>Biz kendimize gÃ¶re dÃ¼zenlemeleri yapmalÄ±yÄ±z.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">set :domain, <span style="color:#e6db74">&#39;siteadresi.com&#39;</span> <span style="color:#75715e"># ve ya bir IP adresi olabilir</span>

set :user, <span style="color:#e6db74">&#39;kullaniciadi&#39;</span> <span style="color:#75715e"># sunucu da ssh oturumu aÃ§mak iÃ§in kullanÄ±cÄ±</span>
set :port, <span style="color:#e6db74">&#39;22&#39;</span> <span style="color:#75715e"># ssh portu</span>
set :forward_agent, true <span style="color:#75715e"># forward_agent kulanÄ±lacak ise</span>
set :identity_file, <span style="color:#e6db74">&#39;~/.ssh/id_rsa.pub&#39;</span>  <span style="color:#75715e"># gerekiyorsa ssh key</span>

set :deploy_to, <span style="color:#e6db74">&#39;/var/www/projem&#39;</span> <span style="color:#75715e"># sunucuda deploy edilecek path</span>
set :repository, <span style="color:#e6db74">&#39;git@github.com:user/repo.git&#39;</span> <span style="color:#75715e"># deploy edilecek repository</span>
set :branch, <span style="color:#e6db74">&#39;master&#39;</span> <span style="color:#75715e"># deploy edilecek branch</span>
</code></pre></div><p>EÄŸer sunucuda rbenv ve ya rvm kullanÄ±lÄ±yorsa deploy.rb dosyasÄ±nda ilgili satÄ±rlarÄ± uncomment(baÅŸÄ±ndaki diyez) yapmalÄ±yÄ±z. Ã–rneÄŸin rbenv kullanÄ±lÄ±yorsa;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">require <span style="color:#e6db74">&#39;mina/rbenv&#39;</span>
<span style="color:#75715e">#...</span>
task :environment <span style="color:#66d9ef">do</span>
<span style="color:#75715e">#...</span>
    invoke :<span style="color:#e6db74">&#39;rbenv:load&#39;</span>
<span style="color:#75715e">#...</span>
end
<span style="color:#75715e">#...</span>
</code></pre></div><p>ya da rvm kullanÄ±lÄ±yorsa;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">require <span style="color:#e6db74">&#39;mina/rvm&#39;</span>

set :rvm_path, <span style="color:#e6db74">&#39;/usr/local/rvm/bin/rvm&#39;</span> <span style="color:#75715e"># rvm pathi</span>
<span style="color:#75715e">#...</span>
task :environment <span style="color:#66d9ef">do</span>
<span style="color:#75715e">#...</span>
    invoke :<span style="color:#e6db74">&#39;rvm:use[ruby-1.9.3-p125@default]&#39;</span> <span style="color:#75715e"># rvm ruby versiyonu</span>
<span style="color:#75715e">#...</span>
end
<span style="color:#75715e">#...</span>
</code></pre></div><h2 id="sunucuyu-hazÄ±rlamak">Sunucuyu hazÄ±rlamak</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">ssh -i ~/.ssh/id_rsa.pub kullaniciadi@xxx.xxx.xxx.xxx <span style="color:#75715e"># ve ya kullaniciadi@domain.com</span>
mkdir -p /var/www/projem
chown -R kullaniciadi /var/www/projem
</code></pre></div><p>DiÄŸer tÃ¼m ayarlamalar iÃ§in <a href="http://nadarei.co/mina/settings/">buraya</a> bakabilirsiniz.</p>
<p>HazÄ±rlÄ±k iÃ§in tÃ¼m ayarlamalarÄ± yaptÄ±ÄŸÄ±mÄ±za gÃ¶re ÅŸimdi mina dan sunucuyu ayarlamasÄ±nÄ± isteyebiliriz. Bunun iÃ§in <code>mina setup</code> komutunu Ã§alÄ±ÅŸtÄ±rÄ±yoruz.</p>
<p>Ä°ÅŸte hepsi bu kadar, fakat sunucuda oluÅŸturulan dosyalarda database.yml, secret.yml dosyalarÄ±nÄ± dÃ¼zenlememiz lazÄ±m. Tekrar sunucuya ssh ile girip database ve secret.yml dosyalarÄ±nÄ± gÃ¼ncelleyebilirsiniz. Bundan sonra gÃ¶revleri(task) ve komutlarÄ± Ã¶ÄŸreneceÄŸiz.</p>
<h2 id="gÃ¶revler">GÃ¶revler</h2>
<p>En son mina setup gÃ¶revini Ã§alÄ±ÅŸtÄ±rmÄ±ÅŸtÄ±k. Bu komut aÅŸaÄŸÄ±daki tanÄ±mlanmÄ±ÅŸ gÃ¶revi Ã§aÄŸÄ±rdÄ±.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">task :setup <span style="color:#f92672">=</span>&gt; :environment <span style="color:#66d9ef">do</span>
    <span style="color:#75715e">#.....</span>
end
</code></pre></div><p>Mina ile bu ÅŸekilde ihtiyacÄ±mÄ±z olan gÃ¶revleri oluÅŸturabiliriz. Mesela rails loglarÄ±nÄ± izlemek iÃ§in ssh ile sunucuya manuel baÄŸlanmadan tail komutu Ã§alÄ±ÅŸtÄ±rabiliriz.</p>
<p>Ã–rnek:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">task :logs <span style="color:#66d9ef">do</span>
  queue <span style="color:#e6db74">&#39;echo &#34;Contents of the log file are as follows:&#34;&#39;</span>
  queue <span style="color:#e6db74">&#34;tail -f #{deploy_to}/#{shared_path}/log/production.log&#34;</span>
end
</code></pre></div><p>Åimdi <code>mina logs</code> diye komut gÃ¶nderdiÄŸimizde production log dosyasÄ±nÄ± izlemeye baÅŸladÄ±k.</p>
<p>Ä°ÅŸte <code>mina deploy</code> komutunu Ã§alÄ±ÅŸtÄ±rdÄ±ÄŸÄ±mÄ±zda da aslÄ±nda mina nÄ±n yaptÄ±ÄŸÄ± bu. Ssh ile sunucuya baÄŸlanÄ±yor, ve bir takÄ±m Ã¶n tanÄ±mlÄ± gÃ¶revleri Ã§alÄ±ÅŸtÄ±rÄ±yor. Bunlar, default olarak sÄ±rasÄ±yla</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh"><span style="color:#75715e">#...</span>
invoke :<span style="color:#e6db74">&#39;git:clone&#39;</span>
invoke :<span style="color:#e6db74">&#39;deploy:link_shared_paths&#39;</span>
invoke :<span style="color:#e6db74">&#39;bundle:install&#39;</span>
invoke :<span style="color:#e6db74">&#39;rails:db_create&#39;</span> <span style="color:#75715e"># bu normalde yoktu ben ekliyorum</span>
invoke :<span style="color:#e6db74">&#39;rails:db_migrate&#39;</span>
invoke :<span style="color:#e6db74">&#39;rails:assets_precompile&#39;</span>
invoke :<span style="color:#e6db74">&#39;deploy:cleanup&#39;</span>

to :launch <span style="color:#66d9ef">do</span>
  queue <span style="color:#e6db74">&#34;mkdir -p #{deploy_to}/#{current_path}/tmp/&#34;</span>
  queue <span style="color:#e6db74">&#34;touch #{deploy_to}/#{current_path}/tmp/restart.txt&#34;</span> <span style="color:#75715e"># passenger ile uygulamayÄ± yeniden baÅŸlatÄ±yor</span>
end
<span style="color:#75715e">#...</span>
</code></pre></div><p>Daha fazlasÄ± iÃ§in <a href="http://nadarei.co/mina/about_deploy_rb.html">buraya</a> gÃ¶z atabilirsiniz.</p>
<h2 id="komut-Ã§alÄ±ÅŸtÄ±rmakhttpnadareicominatasksrunhtml"><a href="http://nadarei.co/mina/tasks/run.html">Komut Ã§alÄ±ÅŸtÄ±rmak</a></h2>
<p>Mina nÄ±n tek yapabildiÄŸi bir kaÃ§ gÃ¶rev ile bir projeyi deploy etmek deÄŸildir, mesela sunucuya bir ls Ã§ekmek iÃ§in ssh baÄŸlantÄ±sÄ± kurup Ã¶nce cd ile dizine gidip sonra ls Ã§ekmeniz gerekir. Mina komutlarÄ±nÄ±zÄ± yerel bilgisayarÄ±nÄ±zdan Ã§alÄ±ÅŸtÄ±rÄ±p bu iÅŸlemi tek komutta yapmanÄ±za da olanak saÄŸlÄ±yor. Ã–rneÄŸin;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-zsh" data-lang="zsh">mina run<span style="color:#f92672">[</span>ls<span style="color:#f92672">]</span>
<span style="color:#75715e"># ve ya</span>
mina <span style="color:#e6db74">&#34;run[rake log:clear]&#34;</span>
</code></pre></div><p>Bu yazÄ±mda benim gibi capistrano ile uÄŸraÅŸÄ±p da konfigurasyonlarÄ±nÄ± Ã§ok zahmetli bulanlar ve deploy user i ayarlamakta zorlananlar iÃ§in faydalÄ± bir gem paylaÅŸmayÄ± umdum. UmarÄ±m umduÄŸumu bulmuÅŸumdur. Mina hakkÄ±nda baÅŸka soru sormak isteyen olursa yorumlarda elimden geldiÄŸince cevaplarÄ±m. Esen kalÄ±n.</p>

  </article>

  








    
    
    

<section id="articleNext" class="section nartrow">
    <h3 class="footer-next-heading">More articles from muratbastas</h3>
    <div class="footer-spacer"></div>
    <div class="next-articles-grid" numberOfArticles={numberOfArticles}>
        <div class="post-row">
            
                <a href="/2019/07/05/activerecord-modellerini-projeler-aras%C4%B1-payla%C5%9Ft%C4%B1rmak/" class="article-link"
                 id="article-link-bigger">
                    <div>
                        
                        <div>
                            <h2 class="article-title">
                                ActiveRecord modellerini projeler arasÄ± paylaÅŸtÄ±rmak
                            </h2>
                            <p class="article-excerpt">
                                
                            </p>
                            <div class="article-metadata">
                                July 7, 2019
                            </div>
                        </div>
                    </div>
                </a>
            
                <a href="/2019/05/23/elixir-optionparser-mod%C3%BCl%C3%BC-ile-cli-uygulamas%C4%B1/" class="article-link"
                >
                    <div>
                        
                        <div>
                            <h2 class="article-title">
                                Elixir OptionParser modÃ¼lÃ¼ ile CLI uygulamasÄ±
                            </h2>
                            <p class="article-excerpt">
                                
                            </p>
                            <div class="article-metadata">
                                May 5, 2019
                            </div>
                        </div>
                    </div>
                </a>
            
        </div>
    </div>
</section>

</section>


<script src="/js/progressBar.js"></script>

        
        <div class="footer-gradient"></div>
    <div class="section narrow">
      <div class="footer-hr"></div>
      <div class="footer-container">
        <div class="footer-text">
          Â© 2020 muratbastas
        </div>
        <div class="social-icon-outer">
    <div class="social-icon-container">
        
        
        
        <a href="https://github.com/murat" target="_blank"><svg
class="social-icon-image"
width="14"
height="14"
viewBox="0 0 14 14"
fill="none"
xmlns="http://www.w3.org/2000/svg"
>
<path
  fillRule="evenodd"
  clipRule="evenodd"
  d="M7 0C3.1325 0 0 3.21173 0 7.17706C0 10.3529 2.00375 13.0353 4.78625 13.9863C5.13625 14.0491 5.2675 13.8338 5.2675 13.6454C5.2675 13.4749 5.25875 12.9097 5.25875 12.3087C3.5 12.6406 3.045 11.8691 2.905 11.4653C2.82625 11.259 2.485 10.622 2.1875 10.4516C1.9425 10.317 1.5925 9.98508 2.17875 9.97611C2.73 9.96714 3.12375 10.4964 3.255 10.7118C3.885 11.7973 4.89125 11.4923 5.29375 11.3039C5.355 10.8374 5.53875 10.5234 5.74 10.3439C4.1825 10.1645 2.555 9.54549 2.555 6.80026C2.555 6.01976 2.82625 5.37382 3.2725 4.87143C3.2025 4.692 2.9575 3.95635 3.3425 2.96951C3.3425 2.96951 3.92875 2.78111 5.2675 3.70516C5.8275 3.54367 6.4225 3.46293 7.0175 3.46293C7.6125 3.46293 8.2075 3.54367 8.7675 3.70516C10.1063 2.77214 10.6925 2.96951 10.6925 2.96951C11.0775 3.95635 10.8325 4.692 10.7625 4.87143C11.2087 5.37382 11.48 6.01079 11.48 6.80026C11.48 9.55446 9.84375 10.1645 8.28625 10.3439C8.54 10.5682 8.75875 10.9988 8.75875 11.6717C8.75875 12.6316 8.75 13.4032 8.75 13.6454C8.75 13.8338 8.88125 14.0581 9.23125 13.9863C11.9963 13.0353 14 10.3439 14 7.17706C14 3.21173 10.8675 0 7 0Z"
  fill="#73737D"
/>
</svg></a>
        <span class="hidden">https://github.com/murat</span>
        
        
        
        
        <a href="https://www.linkedin.com/in/muratbastas/" target="_blank"><svg
class="social-icon-image"
width="14"
height="14"
viewBox="0 0 14 14"
fill="none"
xmlns="http://www.w3.org/2000/svg"
{...props}
>
<path
  fillRule="evenodd"
  clipRule="evenodd"
  d="M3.59615 13.125H0.871552V4.36523H3.59615V13.125ZM2.24847 3.16406C1.81878 3.16406 1.44769 3.00781 1.13519 2.69531C0.822692 2.38281 0.666443 2.01171 0.666443 1.58203C0.666443 1.15234 0.822692 0.781248 1.13519 0.468749C1.44769 0.156249 1.81878 0 2.24847 0C2.67816 0 3.04925 0.156249 3.36175 0.468749C3.67425 0.781248 3.8305 1.15234 3.8305 1.58203C3.8305 2.01171 3.67425 2.38281 3.36175 2.69531C3.04925 3.00781 2.67816 3.16406 2.24847 3.16406ZM13.7915 13.125H11.0669V8.84765C11.0669 8.14452 11.0083 7.63671 10.8911 7.32421C10.6763 6.79687 10.2563 6.5332 9.63134 6.5332C9.00634 6.5332 8.56689 6.76757 8.31298 7.23632C8.11767 7.58788 8.02001 8.10546 8.02001 8.78905V13.125H5.32471V4.36523H7.93212V5.5664H7.96142C8.15673 5.17578 8.46923 4.85351 8.89892 4.59961C9.36767 4.28711 9.91454 4.13086 10.5395 4.13086C11.8091 4.13086 12.6977 4.53125 13.2055 5.33203C13.5962 5.97656 13.7915 6.97265 13.7915 8.3203V13.125Z"
  fill="#73737D"
/>
</svg></a>
        <span class="hidden">https://www.linkedin.com/in/muratbastas/</span>
        
        
        
        
        <a href="https://medium.com/@muratbastas" target="_blank"><svg
class="social-icon-image"
width="13"
height="11"
viewBox="0 0 13 11"
fill="none"
xmlns="http://www.w3.org/2000/svg"
>
<path
  fillRule="evenodd"
  clipRule="evenodd"
  d="M1.51041 2.69775C1.51041 2.5415 1.44965 2.40261 1.32812 2.28108L0.15625 0.874837V0.666504H3.82812L6.64061 6.86441L9.11456 0.666504H12.6041V0.874837L11.5885 1.83838C11.5017 1.90782 11.467 2.00331 11.4843 2.12483V9.20815C11.467 9.32968 11.5017 9.42516 11.5885 9.49461L12.5781 10.4581V10.6665H7.63019V10.4581L8.64581 9.46857C8.6979 9.41648 8.72828 9.37742 8.73696 9.35138C8.74564 9.32534 8.74998 9.26891 8.74998 9.18211V3.45296L5.93749 10.6404H5.54686L2.23958 3.45296V8.27065C2.22222 8.47898 2.28298 8.66128 2.42187 8.81753L3.74999 10.4321V10.6404H0V10.4321L1.32812 8.81753C1.48437 8.66128 1.54514 8.47898 1.51041 8.27065V2.69775Z"
  fill="#73737D"
/>
</svg></a>
        <span class="hidden">https://medium.com/@muratbastas</span>
        
        
        
        
        <a href="https://twitter.com/muratbastas" target="_blank"><svg
class="social-icon-image"
width="16"
height="13"
viewBox="0 0 16 13"
fill="none"
xmlns="http://www.w3.org/2000/svg"
{...props}
>
<path
  fillRule="evenodd"
  clipRule="evenodd"
  d="M14.0658 2.34438C14.7013 1.96349 15.1892 1.3604 15.419 0.641811C14.8244 0.994439 14.1658 1.25056 13.4648 1.3886C12.9034 0.7905 12.1036 0.416748 11.2185 0.416748C9.51888 0.416748 8.14096 1.79461 8.14096 3.49411C8.14096 3.7353 8.16822 3.97019 8.22068 4.19542C5.66301 4.06708 3.39543 2.84191 1.8776 0.980064C1.6127 1.43458 1.46094 1.96322 1.46094 2.52719C1.46094 3.59485 2.00428 4.5368 2.83003 5.08865C2.32553 5.07268 1.85104 4.93425 1.43608 4.70376C1.43586 4.71659 1.43586 4.72949 1.43586 4.74244C1.43586 6.23349 2.49666 7.47732 3.90448 7.75999C3.64622 7.83033 3.37436 7.86792 3.09366 7.86792C2.89537 7.86792 2.70257 7.84866 2.51471 7.81272C2.90629 9.03537 4.0428 9.92509 5.38945 9.94994C4.33623 10.7753 3.00928 11.2673 1.56749 11.2673C1.31911 11.2673 1.07413 11.2528 0.833374 11.2243C2.19527 12.0975 3.81291 12.6069 5.55081 12.6069C11.2113 12.6069 14.3067 7.91763 14.3067 3.85096C14.3067 3.71753 14.3037 3.5848 14.2978 3.45285C14.899 3.01896 15.4208 2.47694 15.8334 1.8598C15.2815 2.10456 14.6884 2.26998 14.0658 2.34438Z"
  fill="#73737D"
/>
</svg></a>
        <span class="hidden">https://twitter.com/muratbastas</span>
        
        
    </div>
</div>

    </div>
</div>

    </div>

    
    <script src="/js/prism.js"></script>
</body>

</html>